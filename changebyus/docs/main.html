<!DOCTYPE html>

<html>
<head>
  <title>main.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="FlaggedProjectCollection.html">
                FlaggedProjectCollection.coffee
              </a>
            
              
              <a class="source" href="FlaggedUserCollection.html">
                FlaggedUserCollection.coffee
              </a>
            
              
              <a class="source" href="ProjectCalendarCollection.html">
                ProjectCalendarCollection.coffee
              </a>
            
              
              <a class="source" href="ProjectDiscussionsCollection.html">
                ProjectDiscussionsCollection.coffee
              </a>
            
              
              <a class="source" href="ProjectListCollection.html">
                ProjectListCollection.coffee
              </a>
            
              
              <a class="source" href="ProjectMembersCollection.html">
                ProjectMembersCollection.coffee
              </a>
            
              
              <a class="source" href="ResourceListCollection.html">
                ResourceListCollection.coffee
              </a>
            
              
              <a class="source" href="StreamCollection.html">
                StreamCollection.coffee
              </a>
            
              
              <a class="source" href="UnapprovedResourcesCollection.html">
                UnapprovedResourcesCollection.coffee
              </a>
            
              
              <a class="source" href="UpdatesCollection.html">
                UpdatesCollection.coffee
              </a>
            
              
              <a class="source" href="main.html">
                main.coffee
              </a>
            
              
              <a class="source" href="CityModel.html">
                CityModel.coffee
              </a>
            
              
              <a class="source" href="PostReplyModel.html">
                PostReplyModel.coffee
              </a>
            
              
              <a class="source" href="ProjectCalendarModel.html">
                ProjectCalendarModel.coffee
              </a>
            
              
              <a class="source" href="ProjectDiscussionCommentModel.html">
                ProjectDiscussionCommentModel.coffee
              </a>
            
              
              <a class="source" href="ProjectDiscussionModel.html">
                ProjectDiscussionModel.coffee
              </a>
            
              
              <a class="source" href="ProjectMemberModel.html">
                ProjectMemberModel.coffee
              </a>
            
              
              <a class="source" href="ProjectModel.html">
                ProjectModel.coffee
              </a>
            
              
              <a class="source" href="ResourceModel.html">
                ResourceModel.coffee
              </a>
            
              
              <a class="source" href="UpdateModel.html">
                UpdateModel.coffee
              </a>
            
              
              <a class="source" href="UserModel.html">
                UserModel.coffee
              </a>
            
              
              <a class="source" href="CBUAdminView.html">
                CBUAdminView.coffee
              </a>
            
              
              <a class="source" href="CBUCityView.html">
                CBUCityView.coffee
              </a>
            
              
              <a class="source" href="CBUDashboardView.html">
                CBUDashboardView.coffee
              </a>
            
              
              <a class="source" href="CBUDiscoverView.html">
                CBUDiscoverView.coffee
              </a>
            
              
              <a class="source" href="CBUFundraisingView.html">
                CBUFundraisingView.coffee
              </a>
            
              
              <a class="source" href="CBULoginView.html">
                CBULoginView.coffee
              </a>
            
              
              <a class="source" href="CBUMainView.html">
                CBUMainView.coffee
              </a>
            
              
              <a class="source" href="CBUProjectOwnerView.html">
                CBUProjectOwnerView.coffee
              </a>
            
              
              <a class="source" href="CBUProjectView.html">
                CBUProjectView.coffee
              </a>
            
              
              <a class="source" href="CBUSignupView.html">
                CBUSignupView.coffee
              </a>
            
              
              <a class="source" href="CBUStreamView.html">
                CBUStreamView.coffee
              </a>
            
              
              <a class="source" href="CBUStripeEdit.html">
                CBUStripeEdit.coffee
              </a>
            
              
              <a class="source" href="CBUUserView.html">
                CBUUserView.coffee
              </a>
            
              
              <a class="source" href="BannerSearchView.html">
                BannerSearchView.coffee
              </a>
            
              
              <a class="source" href="BannerImageView.html">
                BannerImageView.coffee
              </a>
            
              
              <a class="source" href="ProjectAddUpdateView.html">
                ProjectAddUpdateView.coffee
              </a>
            
              
              <a class="source" href="ProjectCalenderView.html">
                ProjectCalenderView.coffee
              </a>
            
              
              <a class="source" href="ProjectDiscussionCommentView.html">
                ProjectDiscussionCommentView.coffee
              </a>
            
              
              <a class="source" href="ProjectDiscussionListItemView.html">
                ProjectDiscussionListItemView.coffee
              </a>
            
              
              <a class="source" href="ProjectDiscussionPreviewView.html">
                ProjectDiscussionPreviewView.coffee
              </a>
            
              
              <a class="source" href="ProjectDiscussionThreadItemView.html">
                ProjectDiscussionThreadItemView.coffee
              </a>
            
              
              <a class="source" href="ProjectDiscussionView.html">
                ProjectDiscussionView.coffee
              </a>
            
              
              <a class="source" href="ProjectDiscussionsView.html">
                ProjectDiscussionsView.coffee
              </a>
            
              
              <a class="source" href="ProjectDonationModalView.html">
                ProjectDonationModalView.coffee
              </a>
            
              
              <a class="source" href="ProjectEmbedCalendarModalView.html">
                ProjectEmbedCalendarModalView.coffee
              </a>
            
              
              <a class="source" href="ProjectFundraisingView.html">
                ProjectFundraisingView.coffee
              </a>
            
              
              <a class="source" href="ProjectInfoAppearanceView.html">
                ProjectInfoAppearanceView.coffee
              </a>
            
              
              <a class="source" href="ProjectMemberListItemView.html">
                ProjectMemberListItemView.coffee
              </a>
            
              
              <a class="source" href="ProjectMembersView.html">
                ProjectMembersView.coffee
              </a>
            
              
              <a class="source" href="ProjectNewDiscussionView.html">
                ProjectNewDiscussionView.coffee
              </a>
            
              
              <a class="source" href="ProjectSubView.html">
                ProjectSubView.coffee
              </a>
            
              
              <a class="source" href="ProjectUpdateSuccessModalView.html">
                ProjectUpdateSuccessModalView.coffee
              </a>
            
              
              <a class="source" href="AbstractModalView.html">
                AbstractModalView.coffee
              </a>
            
              
              <a class="source" href="AbstractView.html">
                AbstractView.coffee
              </a>
            
              
              <a class="source" href="CreateModalView.html">
                CreateModalView.coffee
              </a>
            
              
              <a class="source" href="CreateView.html">
                CreateView.coffee
              </a>
            
              
              <a class="source" href="ForgotPasswordModalView.html">
                ForgotPasswordModalView.coffee
              </a>
            
              
              <a class="source" href="PostReplyView.html">
                PostReplyView.coffee
              </a>
            
              
              <a class="source" href="ResourceProjectPreviewView.html">
                ResourceProjectPreviewView.coffee
              </a>
            
              
              <a class="source" href="UpdateListItemView.html">
                UpdateListItemView.coffee
              </a>
            
              
              <a class="source" href="UpdatesView.html">
                UpdatesView.coffee
              </a>
            
              
              <a class="source" href="WysiwygFormView.html">
                WysiwygFormView.coffee
              </a>
            
              
              <a class="source" href="ProfileEditView.html">
                ProfileEditView.coffee
              </a>
            
              
              <a class="source" href="UserStreamItemView.html">
                UserStreamItemView.coffee
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>main.coffee</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">require</span>.config
    <span class="hljs-attribute">baseUrl</span>: <span class="hljs-string">"/static/js"</span>
    <span class="hljs-attribute">paths</span>:
        <span class="hljs-string">"jquery"</span>: <span class="hljs-string">"ext/jquery/jquery"</span>
        <span class="hljs-string">"hotkeys"</span>: <span class="hljs-string">"ext/jquery/jquery.hotkeys"</span>
        <span class="hljs-string">"moment"</span>: <span class="hljs-string">"ext/moment/moment.min"</span>
        <span class="hljs-string">"underscore"</span>: <span class="hljs-string">"ext/underscore/underscore-min"</span>
        <span class="hljs-string">"backbone"</span>: <span class="hljs-string">"ext/backbone/backbone-min"</span>
        <span class="hljs-string">"bootstrap"</span>: <span class="hljs-string">"ext/bootstrap/bootstrap.min"</span>
        <span class="hljs-string">"bootstrap-fileupload"</span>: <span class="hljs-string">"ext/bootstrap/bootstrap-fileupload"</span>
        <span class="hljs-string">"button"</span>: <span class="hljs-string">"ext/jquery/jquery.screwdefaultbuttonsV2.min"</span>
        <span class="hljs-string">"serializeObject"</span>: <span class="hljs-string">"ext/jquery/jquery.serializeObject.min"</span>
        <span class="hljs-string">"serializeJSON"</span>: <span class="hljs-string">"ext/jquery/jquery.serializeJSON.min"</span>
        <span class="hljs-string">"dropkick"</span>: <span class="hljs-string">"ext/jquery/jquery.dropkick-min"</span>
        <span class="hljs-string">"slicknav"</span>: <span class="hljs-string">"ext/jquery/jquery.slicknav.min"</span>
        <span class="hljs-string">"hogan"</span>: <span class="hljs-string">"ext/hogan/hogan-2.0.0.amd"</span>
        <span class="hljs-string">"wysiwyg"</span>: <span class="hljs-string">"ext/bootstrap/bootstrap-wysiwyg"</span> 
        <span class="hljs-string">"autocomp"</span>: <span class="hljs-string">"ext/bootstrap/typeahead.min"</span>
        <span class="hljs-string">"prettify"</span>: <span class="hljs-string">"ext/google/prettify"</span>
        <span class="hljs-string">"template"</span>: <span class="hljs-string">"ext/jquery/template"</span>
        <span class="hljs-string">"form"</span>: <span class="hljs-string">"ext/jquery/jquery.form.min"</span>
        <span class="hljs-string">"validate"</span>: <span class="hljs-string">"ext/jquery/jquery.validate.min"</span>
        <span class="hljs-string">"payment"</span>: <span class="hljs-string">"ext/jquery/jquery.payment"</span>
        <span class="hljs-string">"main-view"</span>: <span class="hljs-string">"views/CBUMainView"</span>
        <span class="hljs-string">"discover-view"</span>: <span class="hljs-string">"views/CBUDiscoverView"</span>
        <span class="hljs-string">"city-view"</span>: <span class="hljs-string">"views/CBUCityView"</span>
        <span class="hljs-string">"project-view"</span>: <span class="hljs-string">"views/CBUProjectView"</span>
        <span class="hljs-string">"fundraising"</span>: <span class="hljs-string">"views/CBUFundraisingView"</span>
        <span class="hljs-string">"project-owner-view"</span>: <span class="hljs-string">"views/CBUProjectOwnerView"</span>
        <span class="hljs-string">"login-view"</span>: <span class="hljs-string">"views/CBULoginView"</span>
        <span class="hljs-string">"signup-view"</span>: <span class="hljs-string">"views/CBUSignupView"</span>
        <span class="hljs-string">"create-view"</span>: <span class="hljs-string">"views/partials-universal/CreateView"</span>
        <span class="hljs-string">"abstract-view"</span>: <span class="hljs-string">"views/partials-universal/AbstractView"</span>
        <span class="hljs-string">"abstract-modal-view"</span>: <span class="hljs-string">"views/partials-universal/AbstractModalView"</span>
        <span class="hljs-string">"project-sub-view"</span>: <span class="hljs-string">"views/partials-project/ProjectSubView"</span>
        <span class="hljs-string">"resource-project-view"</span>: <span class="hljs-string">"views/partials-universal/ResourceProjectPreviewView"</span>
        <span class="hljs-string">"user-view"</span>: <span class="hljs-string">"views/CBUUserView"</span>
        <span class="hljs-string">"dashboard-view"</span>: <span class="hljs-string">"views/CBUDashboardView"</span>
        <span class="hljs-string">"stripe-edit"</span>: <span class="hljs-string">"views/CBUStripeEdit"</span>
        <span class="hljs-string">"stream-view"</span>: <span class="hljs-string">"views/CBUStreamView"</span>
        <span class="hljs-string">"admin-view"</span>: <span class="hljs-string">"views/CBUAdminView"</span>

    <span class="hljs-attribute">shim</span>:
        <span class="hljs-string">"slicknav"</span>:[<span class="hljs-string">"jquery"</span>]
        <span class="hljs-string">"dropkick"</span>:[<span class="hljs-string">"jquery"</span>]
        <span class="hljs-string">"button"</span>:[<span class="hljs-string">"jquery"</span>]
        <span class="hljs-string">"bootstrap-fileupload"</span>:[<span class="hljs-string">"jquery"</span>, <span class="hljs-string">"bootstrap"</span>]
        <span class="hljs-string">"autocomp"</span>:[<span class="hljs-string">"jquery"</span>, <span class="hljs-string">"bootstrap"</span>]
        <span class="hljs-string">"wysiwyg"</span>:[<span class="hljs-string">"jquery"</span>, <span class="hljs-string">"bootstrap"</span>]
        <span class="hljs-string">"hotkeys"</span>:[<span class="hljs-string">"jquery"</span>]
        <span class="hljs-string">"form"</span>:[<span class="hljs-string">"jquery"</span>]
        <span class="hljs-string">"template"</span>:[<span class="hljs-string">"jquery"</span>]
        <span class="hljs-string">"validate"</span>:[<span class="hljs-string">"jquery"</span>]
        <span class="hljs-string">"payment"</span>:[<span class="hljs-string">"jquery"</span>]
        <span class="hljs-string">"serializeObject"</span>:[<span class="hljs-string">"jquery"</span>]
        <span class="hljs-string">"serializeJSON"</span>:[<span class="hljs-string">"jquery"</span>]

define [<span class="hljs-string">"jquery"</span>,
        <span class="hljs-string">"backbone"</span>,
         <span class="hljs-string">"main-view"</span>,
         <span class="hljs-string">"discover-view"</span>,
         <span class="hljs-string">"city-view"</span>,
         <span class="hljs-string">"project-view"</span>,
         <span class="hljs-string">"project-owner-view"</span>,
         <span class="hljs-string">"login-view"</span>,
         <span class="hljs-string">"signup-view"</span>,
         <span class="hljs-string">"user-view"</span>,
         <span class="hljs-string">"dashboard-view"</span>,
         <span class="hljs-string">"stream-view"</span>,
         <span class="hljs-string">"admin-view"</span>,
         <span class="hljs-string">"create-view"</span>,
         <span class="hljs-string">"stripe-edit"</span>,
         <span class="hljs-string">"fundraising"</span>,
         <span class="hljs-string">"slicknav"</span>],
    ($,
     Backbone,
     CBUMainView,
     CBUDiscoverView,
     CBUCityView,
     CBUProjectView,
     CBUProjectOwnerView,
     CBULoginView,
     CBUSignupView,
     CBUUserView,
     CBUDashboardView,
     CBUStreamView,
     CBUAdminView,
     CreateView,
     CBUStripeEdit,
     CBUFundraisingView,
     SlickNav)<span class="hljs-function"> -&gt;</span>
        $(<span class="hljs-built_in">document</span>).ready<span class="hljs-function"> -&gt;</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Unlike most backbone apps, this project is not a single page app.
Routes are determined by relative path and not hash because of flask’s routing.
Every page starts with main.js and the appropriate class is then loaded for each page.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            config = {<span class="hljs-attribute">parent</span>:<span class="hljs-string">".main-content"</span>}

            CBURouter = Backbone.Router.extend
                <span class="hljs-attribute">routes</span>:
                    <span class="hljs-string">"project/:id"</span>: <span class="hljs-string">"project"</span>
                    <span class="hljs-string">"project/:id/admin"</span>: <span class="hljs-string">"projectAdmin"</span>
                    <span class="hljs-string">"project/:id/stripe/:sid/edit"</span>: <span class="hljs-string">"stripeEdit"</span>
                    <span class="hljs-string">"project/:id/fundraising"</span>: <span class="hljs-string">"fundraising"</span>
                    <span class="hljs-string">"resource/:id"</span>: <span class="hljs-string">"resource"</span>
                    <span class="hljs-string">"resource/:id/admin"</span>: <span class="hljs-string">"resourceAdmin"</span>
                    <span class="hljs-string">"city/:id"</span>: <span class="hljs-string">"city"</span>
                    <span class="hljs-string">"user/:id"</span>: <span class="hljs-string">"user"</span>
                    <span class="hljs-string">"discover"</span>: <span class="hljs-string">"discover"</span>
                    <span class="hljs-string">"stream/dashboard"</span>: <span class="hljs-string">"dashboard"</span>
                    <span class="hljs-string">"create/project"</span>: <span class="hljs-string">"createProject"</span>
                    <span class="hljs-string">"create/resource"</span>: <span class="hljs-string">"createResource"</span>
                    <span class="hljs-string">"login"</span>: <span class="hljs-string">"login"</span>
                    <span class="hljs-string">"signup"</span>: <span class="hljs-string">"signup"</span>
                    <span class="hljs-string">"project"</span>: <span class="hljs-string">"project"</span>
                    <span class="hljs-string">"stream"</span>: <span class="hljs-string">"stream"</span>
                    <span class="hljs-string">"stream/"</span>: <span class="hljs-string">"stream"</span>
                    <span class="hljs-string">"admin"</span>: <span class="hljs-string">"admin"</span>
                    <span class="hljs-string">""</span>: <span class="hljs-string">"default"</span>

                <span class="hljs-attribute">project</span>: <span class="hljs-function"><span class="hljs-params">(id_)</span> -&gt;</span>
                    config.model = {<span class="hljs-attribute">id</span>:id_}
                    config.isResource = <span class="hljs-literal">false</span>
                    config.isOwner = (userID <span class="hljs-keyword">is</span> projectOwnerID)
                    <span class="hljs-built_in">window</span>.CBUAppView =  <span class="hljs-keyword">new</span> CBUProjectView(config)

                <span class="hljs-attribute">projectAdmin</span>: <span class="hljs-function"><span class="hljs-params">(id_)</span> -&gt;</span>
                    <span class="hljs-keyword">if</span> userID
                        config.model = {<span class="hljs-attribute">id</span>:id_}
                        <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CBUProjectOwnerView(config)
                    <span class="hljs-keyword">else</span>
                        <span class="hljs-built_in">window</span>.location.href = <span class="hljs-string">"/login"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>pass the project id as will as the stripe id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-attribute">stripeEdit</span>: <span class="hljs-function"><span class="hljs-params">(id_, sid_)</span> -&gt;</span>
                    config.model = {<span class="hljs-attribute">id</span>:id_, <span class="hljs-attribute">sid</span>:sid_}
                    <span class="hljs-built_in">window</span>.CBUAppView =  <span class="hljs-keyword">new</span> CBUStripeEdit(config)

                <span class="hljs-attribute">fundraising</span>: <span class="hljs-function"><span class="hljs-params">(id_)</span> -&gt;</span>
                    config.model = {<span class="hljs-attribute">id</span>:id_}
                    <span class="hljs-built_in">window</span>.CBUAppView =  <span class="hljs-keyword">new</span> CBUFundraisingView(config)

                <span class="hljs-attribute">resource</span>: <span class="hljs-function"><span class="hljs-params">(id_)</span> -&gt;</span>
                    config.model = {<span class="hljs-attribute">id</span>:id_}
                    config.isResource = <span class="hljs-literal">true</span>
                    <span class="hljs-built_in">window</span>.CBUAppView =  <span class="hljs-keyword">new</span> CBUProjectView(config)

                <span class="hljs-attribute">resourceAdmin</span>: <span class="hljs-function"><span class="hljs-params">(id_)</span> -&gt;</span>
                    <span class="hljs-keyword">if</span> userID
                        config.model = {<span class="hljs-attribute">id</span>:id_}
                        config.isResource = <span class="hljs-literal">true</span>
                        <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CBUProjectOwnerView(config)
                    <span class="hljs-keyword">else</span>
                        <span class="hljs-built_in">window</span>.location.href = <span class="hljs-string">"/login"</span>

                <span class="hljs-attribute">city</span>: <span class="hljs-function"><span class="hljs-params">(id_)</span> -&gt;</span>
                    config.model = {<span class="hljs-attribute">id</span>:id_}
                    <span class="hljs-built_in">window</span>.CBUAppView =  <span class="hljs-keyword">new</span> CBUCityView(config)

                <span class="hljs-attribute">user</span>: <span class="hljs-function"><span class="hljs-params">(id_)</span> -&gt;</span>
                    config.model = {<span class="hljs-attribute">id</span>:id_}
                    <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CBUUserView(config)

                <span class="hljs-attribute">discover</span>:<span class="hljs-function"> -&gt;</span>
                    <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CBUDiscoverView(config)

                <span class="hljs-attribute">dashboard</span>:<span class="hljs-function"> -&gt;</span>
                    config.model = {<span class="hljs-attribute">id</span>:<span class="hljs-built_in">window</span>.userID}
                    <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CBUDashboardView(config)

                <span class="hljs-attribute">createProject</span>:<span class="hljs-function"> -&gt;</span>
                    config.isResource = <span class="hljs-literal">false</span>
                    <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CreateView(config)

                <span class="hljs-attribute">createResource</span>:<span class="hljs-function"> -&gt;</span>
                    config.isResource = <span class="hljs-literal">true</span>
                    <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CreateView(config)

                <span class="hljs-attribute">login</span>:<span class="hljs-function"> -&gt;</span>
                    <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CBULoginView(config)

                <span class="hljs-attribute">signup</span>:<span class="hljs-function"> -&gt;</span>
                    <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CBUSignupView(config)

                <span class="hljs-attribute">stream</span>:<span class="hljs-function">-&gt;</span>
                    <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CBUStreamView(config)

                <span class="hljs-attribute">admin</span>:<span class="hljs-function">-&gt;</span>
                    <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CBUAdminView(config)

                <span class="hljs-attribute">default</span>:<span class="hljs-function"> -&gt;</span>
                    <span class="hljs-built_in">window</span>.CBUAppView = <span class="hljs-keyword">new</span> CBUMainView(config)

            CBUAppRouter = <span class="hljs-keyword">new</span> CBURouter()
            Backbone.history.start <span class="hljs-attribute">pushState</span>: <span class="hljs-literal">true</span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2 id="top-nav-and-responsive-">TOP NAV AND RESPONSIVE </h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>            $navTop = $(<span class="hljs-string">'.nav.pull-left'</span>)
            $navTop.hover<span class="hljs-function"> -&gt;</span>
                $(<span class="hljs-keyword">this</span>).toggleClass(<span class="hljs-string">'active'</span>)
            ,<span class="hljs-function"> -&gt;</span>
                $(<span class="hljs-keyword">this</span>).removeClass(<span class="hljs-string">'active'</span>)

            $(<span class="hljs-string">'.nav.nav-pills.pull-right'</span>).slicknav
                <span class="hljs-attribute">label</span>: <span class="hljs-string">''</span>,
                <span class="hljs-attribute">prependTo</span>:<span class="hljs-string">'#responsive-menu'</span>

            $clone     = $(<span class="hljs-string">'.resp-append'</span>)
            $cloneLast = $(<span class="hljs-string">'.resp-append-last'</span>)
            
            $clone.clone().appendTo $(<span class="hljs-string">'.slicknav_nav'</span>)
            $cloneLast.clone().appendTo $(<span class="hljs-string">'.slicknav_nav'</span>)

            $<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">".logged-in .user-avatar"</span>)</span>.<span class="hljs-title">click</span> <span class="hljs-params">(e)</span>-&gt;</span>
                <span class="hljs-built_in">window</span>.location.href = <span class="hljs-string">"/stream/dashboard"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2 id="log-out-">LOG OUT </h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>            $<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">"a[href='/logout']"</span>)</span>.<span class="hljs-title">click</span> <span class="hljs-params">(e)</span>-&gt;</span>
                e.preventDefault()
                $.ajax(
                    <span class="hljs-attribute">type</span>: <span class="hljs-string">"GET"</span>
                    <span class="hljs-attribute">url</span>: <span class="hljs-string">"/logout"</span>
                ).done <span class="hljs-function"><span class="hljs-params">(response)</span>=&gt;</span>
                    <span class="hljs-built_in">window</span>.location.reload()</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h2 id="global-utils-">GLOBAL UTILS </h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-built_in">window</span>.<span class="hljs-function"><span class="hljs-title">popWindow</span> = <span class="hljs-params">(url)</span> -&gt;</span>
                w     = <span class="hljs-number">650</span>
                h     = <span class="hljs-number">650</span>
                left  = (screen.width / <span class="hljs-number">2</span>) - (w / <span class="hljs-number">2</span>)
                top   = (screen.height / <span class="hljs-number">2</span>) - (h / <span class="hljs-number">2</span>)
                title = <span class="hljs-string">"social"</span>
                <span class="hljs-built_in">window</span>.open url, title, <span class="hljs-string">"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=<span class="hljs-subst">#{w}</span>, height=<span class="hljs-subst">#{h}</span>, top=<span class="hljs-subst">#{top}</span>, left=+<span class="hljs-subst">#{left}</span>"</span>

            <span class="hljs-built_in">window</span>.<span class="hljs-function"><span class="hljs-title">delay</span> = <span class="hljs-params">(time, fn)</span> -&gt;</span></pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>reversed standard setTimeout to make it easier to format calls in coffeescript</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                setTimeout fn, time

            <span class="hljs-built_in">window</span>.<span class="hljs-function"><span class="hljs-title">randomInt</span> = <span class="hljs-params">(num_)</span> -&gt;</span>
                Math.floor Math.random()*num_

            <span class="hljs-built_in">window</span>.<span class="hljs-function"><span class="hljs-title">arrayToListString</span> = <span class="hljs-params">(arr_)</span> -&gt;</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>used to convert an array to readable comma seperated string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">for</span> str,i <span class="hljs-keyword">in</span> arr_
                    arr_[i] = capitalize(str)

                <span class="hljs-keyword">if</span> (arr_.length &lt;= <span class="hljs-number">1</span>)
                    str = arr_.join()
                <span class="hljs-keyword">else</span>
                    str = arr_.slice(<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>).join(<span class="hljs-string">", "</span>) + <span class="hljs-string">" and "</span> + arr_[arr_.length-<span class="hljs-number">1</span>]
                str

            <span class="hljs-built_in">window</span>.<span class="hljs-function"><span class="hljs-title">capitalize</span> = <span class="hljs-params">(str_)</span> -&gt;</span>
                str = str_.replace <span class="hljs-regexp">/\w\S*/g</span>, <span class="hljs-function"><span class="hljs-params">(txt)</span> -&gt;</span>
                    txt.charAt(<span class="hljs-number">0</span>).toUpperCase() + txt.substr(<span class="hljs-number">1</span>).toLowerCase()

            $<span class="hljs-function"><span class="hljs-params">(<span class="hljs-built_in">document</span>)</span>.<span class="hljs-title">bind</span> '<span class="hljs-title">keydown</span>', <span class="hljs-params">(e)</span>-&gt;</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>used for responsive debugging
adds a ‘debug’ class to the body tag which switches background colors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">if</span> location.host <span class="hljs-keyword">in</span> [<span class="hljs-string">"localhost:5000"</span>, <span class="hljs-string">"localtunnel.com:5000"</span>]
                    c = <span class="hljs-keyword">if</span> e.keyCode <span class="hljs-keyword">then</span> e.keyCode <span class="hljs-keyword">else</span> e.which
                    k = String.fromCharCode(c).toLowerCase()
                    <span class="hljs-keyword">if</span> k <span class="hljs-keyword">is</span> <span class="hljs-string">'d'</span> <span class="hljs-keyword">then</span> $(<span class="hljs-string">'body'</span>).toggleClass(<span class="hljs-string">'debug'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h2 id="sticky-footer-">STICKY FOOTER </h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>            $<span class="hljs-built_in">window</span>      = $(<span class="hljs-built_in">window</span>)
            $topnav      = $(<span class="hljs-string">".top-nav"</span>)
            $mainContent = $(<span class="hljs-string">".main-content"</span>)
            $footer      = $(<span class="hljs-string">".footer-nav"</span>)
            footerHeight = <span class="hljs-number">0</span>
            debounce     = <span class="hljs-literal">null</span>

            <span class="hljs-built_in">window</span>.<span class="hljs-function"><span class="hljs-title">positionFooter</span> = -&gt;</span></pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>this places a fixed position footer if the content does not fill the whole area
or switches to a relative position depending on browser size</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">if</span> debounce <span class="hljs-keyword">then</span> clearTimeout debounce
                debounce = delay <span class="hljs-number">10</span>,<span class="hljs-function"> -&gt;</span>
                    topNavHeight      = $topnav.height()
                    mainContentHeight = $mainContent.height()
                    footerHeight      = $footer.height() + <span class="hljs-number">140</span>

                    <span class="hljs-keyword">if</span> (topNavHeight+mainContentHeight+footerHeight) &lt; $<span class="hljs-built_in">window</span>.height()
                        $footer.css <span class="hljs-attribute">position</span>: <span class="hljs-string">"fixed"</span>
                    <span class="hljs-keyword">else</span>
                        $footer.css <span class="hljs-attribute">position</span>: <span class="hljs-string">"relative"</span>
            $<span class="hljs-built_in">window</span>.scroll(positionFooter).resize(positionFooter)
            positionFooter()

            <span class="hljs-built_in">window</span>.<span class="hljs-function"><span class="hljs-title">onPageElementsLoad</span> = -&gt;</span></pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>add any additional functions to perform here</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                positionFooter()</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
